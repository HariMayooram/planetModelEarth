<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feed View</title>

  <!-- 直接在页面头部嵌入样式 -->
  <style>
    /* 下拉菜单的样式 */
    #apiFeeds {
      width: 200px;
      padding: 8px;
      font-size: 16px;
      margin: 10px;
      background-color: #f0f0f0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    /* 基础表格样式 */
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 10px;
      border: 1px solid #ddd;
      text-align: left;
    }

    th {
      background-color: #f4f4f4;
    }

    /* 响应式设计：小屏幕下适应 */
    @media (max-width: 760px) {
      table, th, td {
        display: block;
        width: 100%;
      }
      td {
        border-bottom: 1px solid #ddd;
      }
    }
  </style>
</head>
<body>

  <!-- 下拉菜单，用于选择 feed -->
  <select id="apiFeeds" onchange="updateFeed(this.value)">
    <!-- 下拉菜单选项将在 JavaScript 中动态填充 -->
  </select>

  <div id="resultJson"></div>
  <div id="resultFull"></div>

  <!-- JavaScript 融入样式和功能 -->
  <script>
    // 定义所有的 API 选项，直接从 jsonList.Table 填充
    var jsonList = {
      "Table": [
        {"value":"none","name":"Select a feed......."},
        {"value":"food","name":"USDA Food List"},
        {"value":"usda","name":"USDA Nutrition Label"},
        {"value":"farmfresh","name":"Farm Fresh (Michigan)"},
        {"value":"nasa","name":"NASA Image Feed"},
        {"value":"comtrade","name":"Comtrade (CORS)"},
        {"value":"serp","name":"Serp APIname (CORS)"},
        {"value":"gdc","name":"GDC Google Data Commons - Forests"},
        {"value":"US:Count_Person","name":"GDC US State Populations"},
        {"value":"LandCoverFraction_Forest","name":"GDC Land Covered by Forests"},
        {"value":"water","name":"Water (dc/g/SDG_6)"},
        {"value":"datausa","name":"DataUSA State Populations"},
        {"value":"seeclickfix-311","name":"See Click Fix Requests"},
        {"value":"open311","name":"See Click Fix Requests (CORS)"},
        {"value":"bsky","name":"BlueSky Model.Earth RSS (CORS)"}
      ]
    };

    // 动态填充下拉菜单
    function populateDropdown() {
      const selectElement = document.getElementById('apiFeeds');
      selectElement.innerHTML = '';  // 清空现有内容
      jsonList.Table.forEach(feed => {
        const option = document.createElement('option');
        option.value = feed.value;
        option.textContent = feed.name;
        selectElement.appendChild(option);
      });
    }

    // 当选择某个 feed 时，更新页面内容
    function updateFeed(feedValue) {
      console.log(`Selected feed: ${feedValue}`);

      // 根据 feedValue 进行相应的操作
      if (feedValue === 'food') {
        loadFoodData();
      } else if (feedValue === 'usda') {
        loadUSDAData();
      }
      // 更多条件处理...
    }

    // 示例：加载 USDA 食品数据
    function loadFoodData() {
      console.log("Loading USDA Food List...");
      // 假设从某个 API 获取数据并渲染
      document.getElementById('resultJson').innerHTML = '<p>USDA Food List API data displayed here.</p>';
    }

    // 示例：加载 USDA 营养标签数据
    function loadUSDAData() {
      console.log("Loading USDA Nutrition Data...");
      document.getElementById('resultJson').innerHTML = '<p>USDA Nutrition Data displayed here.</p>';
    }

    // 初始化页面
    populateDropdown();
  </script>

</body>
</html>


// API 密钥和 Google Sheet ID
const API_KEY = 'AIzaSyC211F_ub1nAGr2Xv-wJGeulMg4nPzG1yE';  // 你从 Google Cloud 获取的 API 密钥
const SPREADSHEET_ID = '1jQTlXWom-pXvyP9zuTcbdluyvpb43hu2h7anxhF5qlQ';  // 你的 Google Sheet ID
const RANGE = 'Sheet1!A1:C10';  // 你想读取的表格区域，可以根据需要调整

// 获取 Google Sheet 数据的函数
function getGoogleSheetData() {
    const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${RANGE}?key=${API_KEY}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            console.log('Google Sheet 数据:', data);
            // 这里你可以处理数据并进行进一步操作，比如将其显示在页面上
            processSheetData(data);
        })
        .catch(error => {
            console.error('获取 Google Sheet 数据失败:', error);
        });
}

// 处理从 Google Sheet 获取的数据
function processSheetData(data) {
    const rows = data.values;
    if (rows.length) {
        console.log('Sheet 数据的每一行：', rows);
        // 你可以根据需求将这些数据展示在页面上
    } else {
        console.log('没有找到任何数据');
    }
}

// 页面加载后立即调用获取 Google Sheet 数据的函数
document.addEventListener('DOMContentLoaded', function() {
    getGoogleSheetData();  // 调用函数
});