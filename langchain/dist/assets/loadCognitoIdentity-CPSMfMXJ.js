import{c as he,r as ye,n as fe,g as me,E as ge,b as xe,d as Ee,e as we,p as Se,N as Pe,A as ve,f as Ce,h as Ie,S as be,D as Ae,i as Re,j as ze,k as Fe,l as _e,m as De,o as ke,q as $e,t as He,u as Oe,v as Ue,w as Le,C as Ne,x as Te,y as Me,z as Ge,B as qe,F as je,G as Be,H as Ve,I as Je,J as We,K as Ke,L as Qe,M as Xe,O as Ye,P as Ze,Q as et,R,T as tt,U as y,a as ee,V as te}from"./index-C7fojxHO.js";import{t as nt,f as ot,s as st,F as it,e as b,a as rt,p as at,b as ct,g as ne}from"./index-Chq5FHNh.js";const oe=(e,t)=>{const n={};for(const o in t)dt(n,e,t,o);return n},dt=(e,t,n,o)=>{if(t!==null){let i=n[o];typeof i=="function"&&(i=[,i]);const[u=lt,m=ut,x=o]=i;(typeof u=="function"&&u(t[x])||typeof u!="function"&&u)&&(e[o]=m(t[x]));return}let[s,a]=n[o];if(typeof a=="function"){let i;const u=s===void 0&&(i=a())!=null,m=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;u?e[o]=i:m&&(e[o]=a())}else{const i=s===void 0&&a!=null,u=typeof s=="function"&&!!s(a)||typeof s!="function"&&!!s;(i||u)&&(e[o]=a)}},lt=e=>e!=null,ut=e=>e,l=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(l);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=l(e[n]));return t}return e},z=(e,t)=>he(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(o){throw o?.name==="SyntaxError"&&Object.defineProperty(o,"$responseBodyText",{value:n}),o}return{}}),pt=async(e,t)=>{const n=await z(e,t);return n.message=n.message??n.Message,n},ht=(e,t)=>{const n=(a,i)=>Object.keys(a).find(u=>u.toLowerCase()===i.toLowerCase()),o=a=>{let i=a;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return o(e.headers[s]);if(t.code!==void 0)return o(t.code);if(t.__type!==void 0)return o(t.__type)},yt=async(e,t,n)=>({operation:me(t).operation,region:await fe(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function ft(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function C(e){return{schemeId:"smithy.api#noAuth"}}const mt=e=>{const t=[];switch(e.operation){case"GetCredentialsForIdentity":{t.push(C());break}case"GetId":{t.push(C());break}case"GetOpenIdToken":{t.push(C());break}case"UnlinkIdentity":{t.push(C());break}default:t.push(ft(e))}return t},gt=e=>({...ye(e)}),xt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),se={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Et="3.768.0",wt={version:Et},St=e=>new TextEncoder().encode(e),Pt=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},ie="required",c="fn",d="argv",w="ref",j=!0,B="isSet",v="booleanEquals",E="error",f="endpoint",g="tree",F="PartitionResult",_="getAttr",S="stringEquals",V={[ie]:!1,type:"String"},J={[ie]:!0,default:!1,type:"Boolean"},W={[w]:"Endpoint"},re={[c]:v,[d]:[{[w]:"UseFIPS"},!0]},ae={[c]:v,[d]:[{[w]:"UseDualStack"},!0]},r={},P={[w]:"Region"},K={[c]:_,[d]:[{[w]:F},"supportsFIPS"]},ce={[w]:F},Q={[c]:v,[d]:[!0,{[c]:_,[d]:[ce,"supportsDualStack"]}]},X=[re],Y=[ae],Z=[P],vt={parameters:{Region:V,UseDualStack:J,UseFIPS:J,Endpoint:V},rules:[{conditions:[{[c]:B,[d]:[W]}],rules:[{conditions:X,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:E},{conditions:Y,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:E},{endpoint:{url:W,properties:r,headers:r},type:f}],type:g},{conditions:[{[c]:B,[d]:Z}],rules:[{conditions:[{[c]:"aws.partition",[d]:Z,assign:F}],rules:[{conditions:[re,ae],rules:[{conditions:[{[c]:v,[d]:[j,K]},Q],rules:[{conditions:[{[c]:S,[d]:[P,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:r,headers:r},type:f},{conditions:[{[c]:S,[d]:[P,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:r,headers:r},type:f},{conditions:[{[c]:S,[d]:[P,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:r,headers:r},type:f},{conditions:[{[c]:S,[d]:[P,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:r,headers:r},type:f},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:r,headers:r},type:f}],type:g},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:E}],type:g},{conditions:X,rules:[{conditions:[{[c]:v,[d]:[K,j]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:r,headers:r},type:f}],type:g},{error:"FIPS is enabled but this partition does not support FIPS",type:E}],type:g},{conditions:Y,rules:[{conditions:[Q],rules:[{conditions:[{[c]:S,[d]:["aws",{[c]:_,[d]:[ce,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:r,headers:r},type:f},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:r,headers:r},type:f}],type:g},{error:"DualStack is enabled but this partition does not support DualStack",type:E}],type:g},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:r,headers:r},type:f}],type:g}],type:g},{error:"Invalid Configuration: Missing Region",type:E}]},Ct=vt,It=new ge({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),bt=(e,t={})=>It.get(e,()=>xe(Ct,{endpointParams:e,logger:t.logger}));we.aws=Ee;const At=e=>({apiVersion:"2014-06-30",base64Decoder:e?.base64Decoder??ot,base64Encoder:e?.base64Encoder??nt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??bt,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??mt,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new ve},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ce}],logger:e?.logger??new Pe,serviceId:e?.serviceId??"Cognito Identity",urlParser:e?.urlParser??Se,utf8Decoder:e?.utf8Decoder??St,utf8Encoder:e?.utf8Encoder??Pt}),Rt=e=>{const t=Ie(e),n=()=>t().then($e),o=At(e);return{...o,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??_e,credentialDefaultProvider:e?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Fe({serviceId:o.serviceId,clientVersion:wt.version}),maxAttempts:e?.maxAttempts??ze,region:e?.region??Re("Region is missing"),requestHandler:it.create(e?.requestHandler??n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||Ae),sha256:e?.sha256??be,streamCollector:e?.streamCollector??st,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(ke)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(De))}},zt=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,o){t.updateHttpClientConfig(n,o)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Ft=e=>({httpHandler:e.httpHandler()});class A{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new A({...t,headers:{...t.headers}});return n.query&&(n.query=_t(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return A.clone(this)}}function _t(e){return Object.keys(e).reduce((t,n)=>{const o=e[n];return{...t,[n]:Array.isArray(o)?[...o]:o}},{})}const Dt=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,o=e.credentials;return{setHttpAuthScheme(s){const a=t.findIndex(i=>i.schemeId===s.schemeId);a===-1?t.push(s):t.splice(a,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){o=s},credentials(){return o}}},kt=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),I=e=>e,$t=(e,t)=>{const n={...I(Oe(e)),...I(He(e)),...I(zt(e)),...I(Dt(e))};return t.forEach(o=>o.configure(n)),{...e,...Le(n),...Ue(n),...Ft(n),...kt(n)}};class rn extends Ne{config;constructor(...[t]){const n=Rt(t||{}),o=xt(n),s=Te(o),a=Me(s),i=Ge(a),u=Ye(i),m=qe(u),x=gt(m),q=$t(x,t?.extensions||[]);super(q),this.config=q,this.middlewareStack.use(je(this.config)),this.middlewareStack.use(Be(this.config)),this.middlewareStack.use(Ve(this.config)),this.middlewareStack.use(Je(this.config)),this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Qe(this.config,{httpAuthSchemeParametersProvider:yt,identityProviderConfigProvider:async pe=>new Ze({"aws.auth#sigv4":pe.credentials})})),this.middlewareStack.use(Xe(this.config))}destroy(){super.destroy()}}class p extends et{constructor(t){super(t),Object.setPrototypeOf(this,p.prototype)}}class D extends p{name="InternalErrorException";$fault="server";constructor(t){super({name:"InternalErrorException",$fault:"server",...t}),Object.setPrototypeOf(this,D.prototype)}}class k extends p{name="InvalidParameterException";$fault="client";constructor(t){super({name:"InvalidParameterException",$fault:"client",...t}),Object.setPrototypeOf(this,k.prototype)}}class $ extends p{name="LimitExceededException";$fault="client";constructor(t){super({name:"LimitExceededException",$fault:"client",...t}),Object.setPrototypeOf(this,$.prototype)}}class H extends p{name="NotAuthorizedException";$fault="client";constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t}),Object.setPrototypeOf(this,H.prototype)}}class O extends p{name="ResourceConflictException";$fault="client";constructor(t){super({name:"ResourceConflictException",$fault:"client",...t}),Object.setPrototypeOf(this,O.prototype)}}class U extends p{name="TooManyRequestsException";$fault="client";constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),Object.setPrototypeOf(this,U.prototype)}}class L extends p{name="ResourceNotFoundException";$fault="client";constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),Object.setPrototypeOf(this,L.prototype)}}class N extends p{name="ExternalServiceException";$fault="client";constructor(t){super({name:"ExternalServiceException",$fault:"client",...t}),Object.setPrototypeOf(this,N.prototype)}}class T extends p{name="InvalidIdentityPoolConfigurationException";$fault="client";constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t}),Object.setPrototypeOf(this,T.prototype)}}class M extends p{name="DeveloperUserAlreadyRegisteredException";$fault="client";constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t}),Object.setPrototypeOf(this,M.prototype)}}class G extends p{name="ConcurrentModificationException";$fault="client";constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t}),Object.setPrototypeOf(this,G.prototype)}}const Ht=e=>({...e,...e.Logins&&{Logins:R}}),Ot=e=>({...e,...e.SecretKey&&{SecretKey:R}}),Ut=e=>({...e,...e.Credentials&&{Credentials:Ot(e.Credentials)}}),Lt=e=>({...e,...e.Logins&&{Logins:R}}),Nt=async(e,t)=>{const n=ue("GetCredentialsForIdentity");let o;return o=JSON.stringify(l(e)),le(t,n,"/",void 0,o)},Tt=async(e,t)=>{const n=ue("GetId");let o;return o=JSON.stringify(l(e)),le(t,n,"/",void 0,o)},Mt=async(e,t)=>{if(e.statusCode>=300)return de(e,t);const n=await z(e.body,t);let o={};return o=tn(n),{$metadata:h(e),...o}},Gt=async(e,t)=>{if(e.statusCode>=300)return de(e,t);const n=await z(e.body,t);let o={};return o=l(n),{$metadata:h(e),...o}},de=async(e,t)=>{const n={...e,body:await pt(e.body,t)},o=ht(e,n.body);switch(o){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Vt(n);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Wt(n);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Kt(n);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await Qt(n);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await Xt(n);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await Zt(n);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await Yt(n);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Bt(n);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Jt(n);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await jt(n);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await qt(n);default:const s=n.body;return nn({output:e,parsedBody:s,errorCode:o})}},qt=async(e,t)=>{const n=e.body,o=l(n),s=new G({$metadata:h(e),...o});return y(s,n)},jt=async(e,t)=>{const n=e.body,o=l(n),s=new M({$metadata:h(e),...o});return y(s,n)},Bt=async(e,t)=>{const n=e.body,o=l(n),s=new N({$metadata:h(e),...o});return y(s,n)},Vt=async(e,t)=>{const n=e.body,o=l(n),s=new D({$metadata:h(e),...o});return y(s,n)},Jt=async(e,t)=>{const n=e.body,o=l(n),s=new T({$metadata:h(e),...o});return y(s,n)},Wt=async(e,t)=>{const n=e.body,o=l(n),s=new k({$metadata:h(e),...o});return y(s,n)},Kt=async(e,t)=>{const n=e.body,o=l(n),s=new $({$metadata:h(e),...o});return y(s,n)},Qt=async(e,t)=>{const n=e.body,o=l(n),s=new H({$metadata:h(e),...o});return y(s,n)},Xt=async(e,t)=>{const n=e.body,o=l(n),s=new O({$metadata:h(e),...o});return y(s,n)},Yt=async(e,t)=>{const n=e.body,o=l(n),s=new L({$metadata:h(e),...o});return y(s,n)},Zt=async(e,t)=>{const n=e.body,o=l(n),s=new U({$metadata:h(e),...o});return y(s,n)},en=(e,t)=>oe(e,{AccessKeyId:b,Expiration:n=>rt(at(ct(n))),SecretKey:b,SessionToken:b}),tn=(e,t)=>oe(e,{Credentials:n=>en(n),IdentityId:b}),h=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),nn=tt(p),le=async(e,t,n,o,s)=>{const{hostname:a,protocol:i="https",port:u,path:m}=await e.endpoint(),x={protocol:i,hostname:a,port:u,method:"POST",path:m.endsWith("/")?m.slice(0,-1)+n:m+n,headers:t};return s!==void 0&&(x.body=s),new A(x)};function ue(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class an extends ee.classBuilder().ep(se).m(function(t,n,o,s){return[ne(o,this.serialize,this.deserialize),te(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Ht,Ut).ser(Nt).de(Mt).build(){}class cn extends ee.classBuilder().ep(se).m(function(t,n,o,s){return[ne(o,this.serialize,this.deserialize),te(o,t.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Lt,void 0).ser(Tt).de(Gt).build(){}export{rn as CognitoIdentityClient,an as GetCredentialsForIdentityCommand,cn as GetIdCommand};
