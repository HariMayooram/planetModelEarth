import{c as Ft,r as Vt,n as Lt,g as Ut,E as Ht,b as Wt,d as Mt,e as Bt,p as zt,N as Xt,A as jt,f as Gt,h as qt,S as Kt,D as Zt,i as Jt,j as Yt,k as Qt,l as Dt,m as en,o as tn,q as nn,t as sn,u as rn,v as on,w as an,C as cn,x as ln,y as dn,z as un,B as fn,F as hn,G as gn,H as pn,I as mn,J as yn,K as En,L as bn,M as Pn,O as Nn,P as An,Q as Tn,R as et,T as xn,U as V,a as tt,V as nt}from"./index-C7fojxHO.js";import{t as In,f as wn,s as Cn,F as Sn,ag as st,e as T,a as vn,ah as _n,g as rt}from"./index-Chq5FHNh.js";function Le(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const Rn=(e,t)=>{for(const n of Object.keys(e)){const r=e[n],s=async function(c,a,i){const d=new r(c);if(typeof a=="function")this.send(d,a);else if(typeof i=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},i)}else return this.send(d,a)},o=(n[0].toLowerCase()+n.slice(1)).replace(/Command$/,"");t.prototype[o]=s}},ot=e=>{const t="#text";for(const n in e)e.hasOwnProperty(n)&&e[n][t]!==void 0?e[n]=e[n][t]:typeof e[n]=="object"&&e[n]!==null&&(e[n]=ot(e[n]));return e};var xe={},Y={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",r="["+t+"]["+n+"]*",s=new RegExp("^"+r+"$"),o=function(a,i){const d=[];let l=i.exec(a);for(;l;){const f=[];f.startIndex=i.lastIndex-l[0].length;const p=l.length;for(let P=0;P<p;P++)f.push(l[P]);d.push(f),l=i.exec(a)}return d},c=function(a){const i=s.exec(a);return!(i===null||typeof i>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,i,d){if(i){const l=Object.keys(i),f=l.length;for(let p=0;p<f;p++)d==="strict"?a[l[p]]=[i[l[p]]]:a[l[p]]=i[l[p]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=c,e.getAllMatches=o,e.nameRegexp=r})(Y);const Ie=Y,On={allowBooleanAttributes:!1,unpairedTags:[]};xe.validate=function(e,t){t=Object.assign({},On,t);const n=[];let r=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let o=0;o<e.length;o++)if(e[o]==="<"&&e[o+1]==="?"){if(o+=2,o=He(e,o),o.err)return o}else if(e[o]==="<"){let c=o;if(o++,e[o]==="!"){o=We(e,o);continue}else{let a=!1;e[o]==="/"&&(a=!0,o++);let i="";for(;o<e.length&&e[o]!==">"&&e[o]!==" "&&e[o]!=="	"&&e[o]!==`
`&&e[o]!=="\r";o++)i+=e[o];if(i=i.trim(),i[i.length-1]==="/"&&(i=i.substring(0,i.length-1),o--),!Wn(i)){let f;return i.trim().length===0?f="Invalid space after '<'.":f="Tag '"+i+"' is an invalid name.",y("InvalidTag",f,I(e,o))}const d=Fn(e,o);if(d===!1)return y("InvalidAttr","Attributes for '"+i+"' have open quote.",I(e,o));let l=d.value;if(o=d.index,l[l.length-1]==="/"){const f=o-l.length;l=l.substring(0,l.length-1);const p=Me(l,t);if(p===!0)r=!0;else return y(p.err.code,p.err.msg,I(e,f+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return y("InvalidTag","Closing tag '"+i+"' can't have attributes or invalid starting.",I(e,c));if(n.length===0)return y("InvalidTag","Closing tag '"+i+"' has not been opened.",I(e,c));{const f=n.pop();if(i!==f.tagName){let p=I(e,f.tagStartPos);return y("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+i+"'.",I(e,c))}n.length==0&&(s=!0)}}else return y("InvalidTag","Closing tag '"+i+"' doesn't have proper closing.",I(e,o));else{const f=Me(l,t);if(f!==!0)return y(f.err.code,f.err.msg,I(e,o-l.length+f.err.line));if(s===!0)return y("InvalidXml","Multiple possible root nodes found.",I(e,o));t.unpairedTags.indexOf(i)!==-1||n.push({tagName:i,tagStartPos:c}),r=!0}for(o++;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="!"){o++,o=We(e,o);continue}else if(e[o+1]==="?"){if(o=He(e,++o),o.err)return o}else break;else if(e[o]==="&"){const f=Un(e,o);if(f==-1)return y("InvalidChar","char '&' is not expected.",I(e,o));o=f}else if(s===!0&&!Ue(e[o]))return y("InvalidXml","Extra text at the end",I(e,o));e[o]==="<"&&o--}}else{if(Ue(e[o]))continue;return y("InvalidChar","char '"+e[o]+"' is not expected.",I(e,o))}if(r){if(n.length==1)return y("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",I(e,n[0].tagStartPos));if(n.length>0)return y("InvalidXml","Invalid '"+JSON.stringify(n.map(o=>o.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return y("InvalidXml","Start tag expected.",1);return!0};function Ue(e){return e===" "||e==="	"||e===`
`||e==="\r"}function He(e,t){const n=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const r=e.substr(n,t-n);if(t>5&&r==="xml")return y("InvalidXml","XML declaration allowed only at the start of the document.",I(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function We(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let n=1;for(t+=8;t<e.length;t++)if(e[t]==="<")n++;else if(e[t]===">"&&(n--,n===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const $n='"',kn="'";function Fn(e,t){let n="",r="",s=!1;for(;t<e.length;t++){if(e[t]===$n||e[t]===kn)r===""?r=e[t]:r!==e[t]||(r="");else if(e[t]===">"&&r===""){s=!0;break}n+=e[t]}return r!==""?!1:{value:n,index:t,tagClosed:s}}const Vn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Me(e,t){const n=Ie.getAllMatches(e,Vn),r={};for(let s=0;s<n.length;s++){if(n[s][1].length===0)return y("InvalidAttr","Attribute '"+n[s][2]+"' has no space in starting.",q(n[s]));if(n[s][3]!==void 0&&n[s][4]===void 0)return y("InvalidAttr","Attribute '"+n[s][2]+"' is without value.",q(n[s]));if(n[s][3]===void 0&&!t.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+n[s][2]+"' is not allowed.",q(n[s]));const o=n[s][2];if(!Hn(o))return y("InvalidAttr","Attribute '"+o+"' is an invalid name.",q(n[s]));if(!r.hasOwnProperty(o))r[o]=1;else return y("InvalidAttr","Attribute '"+o+"' is repeated.",q(n[s]))}return!0}function Ln(e,t){let n=/\d/;for(e[t]==="x"&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(n))break}return-1}function Un(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Ln(e,t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(e[t]===";")break;return-1}return t}function y(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function Hn(e){return Ie.isName(e)}function Wn(e){return Ie.isName(e)}function I(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function q(e){return e.startIndex+e[1].length}var we={};const it={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}},Mn=function(e){return Object.assign({},it,e)};we.buildOptions=Mn;we.defaultOptions=it;class Bn{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}var zn=Bn;const Xn=Y;function jn(e,t){const n={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let r=1,s=!1,o=!1,c="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(s&&Kn(e,t))t+=7,[entityName,val,t]=Gn(e,t+1),val.indexOf("&")===-1&&(n[Qn(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Zn(e,t))t+=8;else if(s&&Jn(e,t))t+=8;else if(s&&Yn(e,t))t+=9;else if(qn)o=!0;else throw new Error("Invalid DOCTYPE");r++,c=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,r--):r--,r===0)break}else e[t]==="["?s=!0:c+=e[t];if(r!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:n,i:t}}function Gn(e,t){let n="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)n+=e[t];if(n=n.trim(),n.indexOf(" ")!==-1)throw new Error("External entites are not supported");const r=e[t++];let s="";for(;t<e.length&&e[t]!==r;t++)s+=e[t];return[n,s,t]}function qn(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Kn(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Zn(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Jn(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Yn(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function Qn(e){if(Xn.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var Dn=jn;const es=/^[-+]?0x[a-fA-F0-9]+$/,ts=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,ns={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function ss(e,t={}){if(t=Object.assign({},ns,t),!e||typeof e!="string")return e;let n=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(n))return e;if(e==="0")return 0;if(t.hex&&es.test(n))return os(n,16);if(n.search(/[eE]/)!==-1){const r=n.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(t.leadingZeros)n=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return e;return t.eNotation?Number(n):e}else return e}else{const r=ts.exec(n);if(r){const s=r[1],o=r[2];let c=rs(r[3]);if(!t.leadingZeros&&o.length>0&&s&&n[2]!==".")return e;if(!t.leadingZeros&&o.length>0&&!s&&n[1]!==".")return e;if(t.leadingZeros&&o===e)return 0;{const a=Number(n),i=""+a;return i.search(/[eE]/)!==-1?t.eNotation?a:e:n.indexOf(".")!==-1?i==="0"&&c===""||i===c||s&&i==="-"+c?a:e:o?c===i||s+c===i?a:e:n===i||n===s+i?a:e}}else return e}}function rs(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function os(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var is=ss;const at=Y,K=zn,as=Dn,cs=is;let ls=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(n,r)=>String.fromCharCode(Number.parseInt(r,16))}},this.addExternalEntities=ds,this.parseXml=ps,this.parseTextData=us,this.resolveNameSpace=fs,this.buildAttributesMap=gs,this.isItStopNode=bs,this.replaceEntitiesValue=ys,this.readStopNodeData=Ns,this.saveTextToParentTag=Es,this.addChild=ms}};function ds(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function us(e,t,n,r,s,o,c){if(e!==void 0&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){c||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,n,s,o);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Te(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Te(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function fs(e){if(this.options.removeNSPrefix){const t=e.split(":"),n=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=n+t[1])}return e}const hs=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function gs(e,t,n){if(!this.options.ignoreAttributes&&typeof e=="string"){const r=at.getAllMatches(e,hs),s=r.length,o={};for(let c=0;c<s;c++){const a=this.resolveNameSpace(r[c][1]);let i=r[c][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),i!==void 0){this.options.trimValues&&(i=i.trim()),i=this.replaceEntitiesValue(i);const l=this.options.attributeValueProcessor(a,i,t);l==null?o[d]=i:typeof l!=typeof i||l!==i?o[d]=l:o[d]=Te(i,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[d]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const c={};return c[this.options.attributesGroupName]=o,c}return o}}const ps=function(e){e=e.replace(/\r\n?/g,`
`);const t=new K("!xml");let n=t,r="",s="";for(let o=0;o<e.length;o++)if(e[o]==="<")if(e[o+1]==="/"){const a=F(e,">",o,"Closing Tag is not closed.");let i=e.substring(o+2,a).trim();if(this.options.removeNSPrefix){const f=i.indexOf(":");f!==-1&&(i=i.substr(f+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),n&&(r=this.saveTextToParentTag(r,n,s));const d=s.substring(s.lastIndexOf(".")+1);if(i&&this.options.unpairedTags.indexOf(i)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=s.lastIndexOf("."),s=s.substring(0,l),n=this.tagsNodeStack.pop(),r="",o=a}else if(e[o+1]==="?"){let a=Ae(e,o,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const i=new K(a.tagName);i.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(i[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(n,i,s)}o=a.closeIndex+1}else if(e.substr(o+1,3)==="!--"){const a=F(e,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const i=e.substring(o+4,a-2);r=this.saveTextToParentTag(r,n,s),n.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}o=a}else if(e.substr(o+1,2)==="!D"){const a=as(e,o);this.docTypeEntities=a.entities,o=a.i}else if(e.substr(o+1,2)==="!["){const a=F(e,"]]>",o,"CDATA is not closed.")-2,i=e.substring(o+9,a);r=this.saveTextToParentTag(r,n,s);let d=this.parseTextData(i,n.tagname,s,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):n.add(this.options.textNodeName,d),o=a+2}else{let a=Ae(e,o,this.options.removeNSPrefix),i=a.tagName;const d=a.rawTagName;let l=a.tagExp,f=a.attrExpPresent,p=a.closeIndex;this.options.transformTagName&&(i=this.options.transformTagName(i)),n&&r&&n.tagname!=="!xml"&&(r=this.saveTextToParentTag(r,n,s,!1));const P=n;if(P&&this.options.unpairedTags.indexOf(P.tagname)!==-1&&(n=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),i!==t.tagname&&(s+=s?"."+i:i),this.isItStopNode(this.options.stopNodes,s,i)){let b="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)i[i.length-1]==="/"?(i=i.substr(0,i.length-1),s=s.substr(0,s.length-1),l=i):l=l.substr(0,l.length-1),o=a.closeIndex;else if(this.options.unpairedTags.indexOf(i)!==-1)o=a.closeIndex;else{const R=this.readStopNodeData(e,d,p+1);if(!R)throw new Error(`Unexpected end of ${d}`);o=R.i,b=R.tagContent}const G=new K(i);i!==l&&f&&(G[":@"]=this.buildAttributesMap(l,s,i)),b&&(b=this.parseTextData(b,i,s,!0,f,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),G.add(this.options.textNodeName,b),this.addChild(n,G,s)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){i[i.length-1]==="/"?(i=i.substr(0,i.length-1),s=s.substr(0,s.length-1),l=i):l=l.substr(0,l.length-1),this.options.transformTagName&&(i=this.options.transformTagName(i));const b=new K(i);i!==l&&f&&(b[":@"]=this.buildAttributesMap(l,s,i)),this.addChild(n,b,s),s=s.substr(0,s.lastIndexOf("."))}else{const b=new K(i);this.tagsNodeStack.push(n),i!==l&&f&&(b[":@"]=this.buildAttributesMap(l,s,i)),this.addChild(n,b,s),n=b}r="",o=p}}else r+=e[o];return t.child};function ms(e,t,n){const r=this.options.updateTag(t.tagname,n,t[":@"]);r===!1||(typeof r=="string"&&(t.tagname=r),e.addChild(t))}const ys=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Es(e,t,n,r){return e&&(r===void 0&&(r=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,n,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,r),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function bs(e,t,n){const r="*."+n;for(const s in e){const o=e[s];if(r===o||t===o)return!0}return!1}function Ps(e,t,n=">"){let r,s="";for(let o=t;o<e.length;o++){let c=e[o];if(r)c===r&&(r="");else if(c==='"'||c==="'")r=c;else if(c===n[0])if(n[1]){if(e[o+1]===n[1])return{data:s,index:o}}else return{data:s,index:o};else c==="	"&&(c=" ");s+=c}}function F(e,t,n,r){const s=e.indexOf(t,n);if(s===-1)throw new Error(r);return s+t.length-1}function Ae(e,t,n,r=">"){const s=Ps(e,t+1,r);if(!s)return;let o=s.data;const c=s.index,a=o.search(/\s/);let i=o,d=!0;a!==-1&&(i=o.substring(0,a),o=o.substring(a+1).trimStart());const l=i;if(n){const f=i.indexOf(":");f!==-1&&(i=i.substr(f+1),d=i!==s.data.substr(f+1))}return{tagName:i,tagExp:o,closeIndex:c,attrExpPresent:d,rawTagName:l}}function Ns(e,t,n){const r=n;let s=1;for(;n<e.length;n++)if(e[n]==="<")if(e[n+1]==="/"){const o=F(e,">",n,`${t} is not closed`);if(e.substring(n+2,o).trim()===t&&(s--,s===0))return{tagContent:e.substring(r,n),i:o};n=o}else if(e[n+1]==="?")n=F(e,"?>",n+1,"StopNode is not closed.");else if(e.substr(n+1,3)==="!--")n=F(e,"-->",n+3,"StopNode is not closed.");else if(e.substr(n+1,2)==="![")n=F(e,"]]>",n,"StopNode is not closed.")-2;else{const o=Ae(e,n,">");o&&((o&&o.tagName)===t&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,n=o.closeIndex)}}function Te(e,t,n){if(t&&typeof e=="string"){const r=e.trim();return r==="true"?!0:r==="false"?!1:cs(e,n)}else return at.isExist(e)?e:""}var As=ls,ct={};function Ts(e,t){return lt(e,t)}function lt(e,t,n){let r;const s={};for(let o=0;o<e.length;o++){const c=e[o],a=xs(c);let i="";if(n===void 0?i=a:i=n+"."+a,a===t.textNodeName)r===void 0?r=c[a]:r+=""+c[a];else{if(a===void 0)continue;if(c[a]){let d=lt(c[a],t,i);const l=ws(d,t);c[":@"]?Is(d,c[":@"],i,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(d)):t.isArray(a,i,l)?s[a]=[d]:s[a]=d}}}return typeof r=="string"?r.length>0&&(s[t.textNodeName]=r):r!==void 0&&(s[t.textNodeName]=r),s}function xs(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];if(r!==":@")return r}}function Is(e,t,n,r){if(t){const s=Object.keys(t),o=s.length;for(let c=0;c<o;c++){const a=s[c];r.isArray(a,n+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function ws(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return!!(r===0||r===1&&(e[n]||typeof e[n]=="boolean"||e[n]===0))}ct.prettify=Ts;const{buildOptions:Cs}=we,Ss=As,{prettify:vs}=ct,_s=xe;let Rs=class{constructor(t){this.externalEntities={},this.options=Cs(t)}parse(t,n){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const o=_s.validate(t,n);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const r=new Ss(this.options);r.addExternalEntities(this.externalEntities);const s=r.parseXml(t);return this.options.preserveOrder||s===void 0?s:vs(s,this.options)}addEntity(t,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=n}};var Os=Rs;const $s=`
`;function ks(e,t){let n="";return t.format&&t.indentBy.length>0&&(n=$s),dt(e,t,"",n)}function dt(e,t,n,r){let s="",o=!1;for(let c=0;c<e.length;c++){const a=e[c],i=Fs(a);if(i===void 0)continue;let d="";if(n.length===0?d=i:d=`${n}.${i}`,i===t.textNodeName){let b=a[i];Vs(d,t)||(b=t.tagValueProcessor(i,b),b=ut(b,t)),o&&(s+=r),s+=b,o=!1;continue}else if(i===t.cdataPropName){o&&(s+=r),s+=`<![CDATA[${a[i][0][t.textNodeName]}]]>`,o=!1;continue}else if(i===t.commentPropName){s+=r+`<!--${a[i][0][t.textNodeName]}-->`,o=!0;continue}else if(i[0]==="?"){const b=Be(a[":@"],t),G=i==="?xml"?"":r;let R=a[i][0][t.textNodeName];R=R.length!==0?" "+R:"",s+=G+`<${i}${R}${b}?>`,o=!0;continue}let l=r;l!==""&&(l+=t.indentBy);const f=Be(a[":@"],t),p=r+`<${i}${f}`,P=dt(a[i],t,d,l);t.unpairedTags.indexOf(i)!==-1?t.suppressUnpairedNode?s+=p+">":s+=p+"/>":(!P||P.length===0)&&t.suppressEmptyNode?s+=p+"/>":P&&P.endsWith(">")?s+=p+`>${P}${r}</${i}>`:(s+=p+">",P&&r!==""&&(P.includes("/>")||P.includes("</"))?s+=r+t.indentBy+P+r:s+=P,s+=`</${i}>`),o=!0}return s}function Fs(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];if(e.hasOwnProperty(r)&&r!==":@")return r}}function Be(e,t){let n="";if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let s=t.attributeValueProcessor(r,e[r]);s=ut(s,t),s===!0&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${s}"`}return n}function Vs(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let n=e.substr(e.lastIndexOf(".")+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+n)return!0;return!1}function ut(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const r=t.entities[n];e=e.replace(r.regex,r.val)}return e}var Ls=ks;const Us=Ls,Hs={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function $(e){this.options=Object.assign({},Hs,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Bs),this.processTextOrObjNode=Ws,this.options.format?(this.indentate=Ms,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}$.prototype.build=function(e){return this.options.preserveOrder?Us(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};$.prototype.j2x=function(e,t){let n="",r="";for(let s in e)if(Object.prototype.hasOwnProperty.call(e,s))if(typeof e[s]>"u")this.isAttribute(s)&&(r+="");else if(e[s]===null)this.isAttribute(s)?r+="":s[0]==="?"?r+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)r+=this.buildTextValNode(e[s],s,"",t);else if(typeof e[s]!="object"){const o=this.isAttribute(s);if(o)n+=this.buildAttrPairStr(o,""+e[s]);else if(s===this.options.textNodeName){let c=this.options.tagValueProcessor(s,""+e[s]);r+=this.replaceEntitiesValue(c)}else r+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const o=e[s].length;let c="",a="";for(let i=0;i<o;i++){const d=e[s][i];if(!(typeof d>"u"))if(d===null)s[0]==="?"?r+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const l=this.j2x(d,t+1);c+=l.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(a+=l.attrStr)}else c+=this.processTextOrObjNode(d,s,t);else if(this.options.oneListGroup){let l=this.options.tagValueProcessor(s,d);l=this.replaceEntitiesValue(l),c+=l}else c+=this.buildTextValNode(d,s,"",t)}this.options.oneListGroup&&(c=this.buildObjectNode(c,s,a,t)),r+=c}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const o=Object.keys(e[s]),c=o.length;for(let a=0;a<c;a++)n+=this.buildAttrPairStr(o[a],""+e[s][o[a]])}else r+=this.processTextOrObjNode(e[s],s,t);return{attrStr:n,val:r}};$.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Ws(e,t,n){const r=this.j2x(e,n+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,r.attrStr,n):this.buildObjectNode(r.val,t,r.attrStr,n)}$.prototype.buildObjectNode=function(e,t,n,r){if(e==="")return t[0]==="?"?this.indentate(r)+"<"+t+n+"?"+this.tagEndChar:this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let s="</"+t+this.tagEndChar,o="";return t[0]==="?"&&(o="?",s=""),(n||n==="")&&e.indexOf("<")===-1?this.indentate(r)+"<"+t+n+o+">"+e+s:this.options.commentPropName!==!1&&t===this.options.commentPropName&&o.length===0?this.indentate(r)+`<!--${e}-->`+this.newLine:this.indentate(r)+"<"+t+n+o+this.tagEndChar+e+this.indentate(r)+s}};$.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};$.prototype.buildTextValNode=function(e,t,n,r){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(r)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(r)+"<"+t+n+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),s===""?this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+"<"+t+n+">"+s+"</"+t+this.tagEndChar}};$.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function Ms(e){return this.options.indentBy.repeat(e)}function Bs(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}var zs=$;const Xs=xe,js=Os,Gs=zs;var qs={XMLParser:js,XMLValidator:Xs,XMLBuilder:Gs};const Ce=(e,t)=>Ft(e,t).then(n=>{if(n.length){const r=new qs.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(i,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});r.addEntity("#xD","\r"),r.addEntity("#10",`
`);let s;try{s=r.parse(n,!0)}catch(i){throw i&&typeof i=="object"&&Object.defineProperty(i,"$responseBodyText",{value:n}),i}const o="#text",c=Object.keys(s)[0],a=s[c];return a[o]&&(a[c]=a[o],delete a[o]),ot(a)}return{}}),Ks=async(e,t)=>{const n=await Ce(e,t);return n.Error&&(n.Error.message=n.Error.message??n.Error.Message),n},Zs=async(e,t,n)=>({operation:Ut(t).operation,region:await Lt(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function Js(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,n)=>({signingProperties:{config:t,context:n}})}}function Ys(e){return{schemeId:"smithy.api#noAuth"}}const Qs=e=>{const t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(Ys());break}default:t.push(Js(e))}return t},Ds=e=>({...e,stsClientCtor:ve}),er=e=>{const t=Ds(e);return{...Vt(t)}},tr=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),ft={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},nr="3.758.0",sr={version:nr},rr=e=>new TextEncoder().encode(e),or=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},ht="required",u="type",h="fn",g="argv",k="ref",ze=!1,Q=!0,O="booleanEquals",N="stringEquals",gt="sigv4",pt="sts",mt="us-east-1",m="endpoint",Xe="https://sts.{Region}.{PartitionResult#dnsSuffix}",C="tree",L="error",Se="getAttr",je={[ht]:!1,[u]:"String"},D={[ht]:!0,default:!1,[u]:"Boolean"},yt={[k]:"Endpoint"},Ge={[h]:"isSet",[g]:[{[k]:"Region"}]},A={[k]:"Region"},qe={[h]:"aws.partition",[g]:[A],assign:"PartitionResult"},Et={[k]:"UseFIPS"},bt={[k]:"UseDualStack"},x={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:gt,signingName:pt,signingRegion:mt}]},headers:{}},w={},Ke={conditions:[{[h]:N,[g]:[A,"aws-global"]}],[m]:x,[u]:m},Pt={[h]:O,[g]:[Et,!0]},Nt={[h]:O,[g]:[bt,!0]},Ze={[h]:Se,[g]:[{[k]:"PartitionResult"},"supportsFIPS"]},At={[k]:"PartitionResult"},Je={[h]:O,[g]:[!0,{[h]:Se,[g]:[At,"supportsDualStack"]}]},Ye=[{[h]:"isSet",[g]:[yt]}],Qe=[Pt],De=[Nt],ir={parameters:{Region:je,UseDualStack:D,UseFIPS:D,Endpoint:je,UseGlobalEndpoint:D},rules:[{conditions:[{[h]:O,[g]:[{[k]:"UseGlobalEndpoint"},Q]},{[h]:"not",[g]:Ye},Ge,qe,{[h]:O,[g]:[Et,ze]},{[h]:O,[g]:[bt,ze]}],rules:[{conditions:[{[h]:N,[g]:[A,"ap-northeast-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"ap-south-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"ap-southeast-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"ap-southeast-2"]}],endpoint:x,[u]:m},Ke,{conditions:[{[h]:N,[g]:[A,"ca-central-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"eu-central-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"eu-north-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"eu-west-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"eu-west-2"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"eu-west-3"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"sa-east-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,mt]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"us-east-2"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"us-west-1"]}],endpoint:x,[u]:m},{conditions:[{[h]:N,[g]:[A,"us-west-2"]}],endpoint:x,[u]:m},{endpoint:{url:Xe,properties:{authSchemes:[{name:gt,signingName:pt,signingRegion:"{Region}"}]},headers:w},[u]:m}],[u]:C},{conditions:Ye,rules:[{conditions:Qe,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[u]:L},{conditions:De,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[u]:L},{endpoint:{url:yt,properties:w,headers:w},[u]:m}],[u]:C},{conditions:[Ge],rules:[{conditions:[qe],rules:[{conditions:[Pt,Nt],rules:[{conditions:[{[h]:O,[g]:[Q,Ze]},Je],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:w,headers:w},[u]:m}],[u]:C},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[u]:L}],[u]:C},{conditions:Qe,rules:[{conditions:[{[h]:O,[g]:[Ze,Q]}],rules:[{conditions:[{[h]:N,[g]:[{[h]:Se,[g]:[At,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:w,headers:w},[u]:m},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:w,headers:w},[u]:m}],[u]:C},{error:"FIPS is enabled but this partition does not support FIPS",[u]:L}],[u]:C},{conditions:De,rules:[{conditions:[Je],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:w,headers:w},[u]:m}],[u]:C},{error:"DualStack is enabled but this partition does not support DualStack",[u]:L}],[u]:C},Ke,{endpoint:{url:Xe,properties:w,headers:w},[u]:m}],[u]:C}],[u]:C},{error:"Invalid Configuration: Missing Region",[u]:L}]},ar=ir,cr=new Ht({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),lr=(e,t={})=>cr.get(e,()=>Wt(ar,{endpointParams:e,logger:t.logger}));Bt.aws=Mt;const dr=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??wn,base64Encoder:e?.base64Encoder??In,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??lr,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Qs,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new jt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Gt}],logger:e?.logger??new Xt,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??zt,utf8Decoder:e?.utf8Decoder??rr,utf8Encoder:e?.utf8Encoder??or}),ur=e=>{const t=qt(e),n=()=>t().then(nn),r=dr(e);return{...r,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??Dt,credentialDefaultProvider:e?.credentialDefaultProvider??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:e?.defaultUserAgentProvider??Qt({serviceId:r.serviceId,clientVersion:sr.version}),maxAttempts:e?.maxAttempts??Yt,region:e?.region??Jt("Region is missing"),requestHandler:Sn.create(e?.requestHandler??n),retryMode:e?.retryMode??(async()=>(await n()).retryMode||Zt),sha256:e?.sha256??Kt,streamCollector:e?.streamCollector??Cn,useDualstackEndpoint:e?.useDualstackEndpoint??(()=>Promise.resolve(tn)),useFipsEndpoint:e?.useFipsEndpoint??(()=>Promise.resolve(en))}},fr=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,r){t.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},hr=e=>({httpHandler:e.httpHandler()});class J{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new J({...t,headers:{...t.headers}});return n.query&&(n.query=gr(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return J.clone(this)}}function gr(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}const pr=e=>{const t=e.httpAuthSchemes;let n=e.httpAuthSchemeProvider,r=e.credentials;return{setHttpAuthScheme(s){const o=t.findIndex(c=>c.schemeId===s.schemeId);o===-1?t.push(s):t.splice(o,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){n=s},httpAuthSchemeProvider(){return n},setCredentials(s){r=s},credentials(){return r}}},mr=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),Z=e=>e,yr=(e,t)=>{const n={...Z(rn(e)),...Z(sn(e)),...Z(fr(e)),...Z(pr(e))};return t.forEach(r=>r.configure(n)),{...e,...an(n),...on(n),...hr(n),...mr(n)}};class ve extends cn{config;constructor(...[t]){const n=ur(t||{}),r=tr(n),s=ln(r),o=dn(s),c=un(o),a=Nn(c),i=fn(a),d=er(i),l=yr(d,t?.extensions||[]);super(l),this.config=l,this.middlewareStack.use(hn(this.config)),this.middlewareStack.use(gn(this.config)),this.middlewareStack.use(pn(this.config)),this.middlewareStack.use(mn(this.config)),this.middlewareStack.use(yn(this.config)),this.middlewareStack.use(En(this.config)),this.middlewareStack.use(bn(this.config,{httpAuthSchemeParametersProvider:Zs,identityProviderConfigProvider:async f=>new An({"aws.auth#sigv4":f.credentials})})),this.middlewareStack.use(Pn(this.config))}destroy(){super.destroy()}}class S extends Tn{constructor(t){super(t),Object.setPrototypeOf(this,S.prototype)}}const Tt=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:et}}),Er=e=>({...e,...e.Credentials&&{Credentials:Tt(e.Credentials)}});class _e extends S{name="ExpiredTokenException";$fault="client";constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,_e.prototype)}}class Re extends S{name="MalformedPolicyDocumentException";$fault="client";constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),Object.setPrototypeOf(this,Re.prototype)}}class Oe extends S{name="PackedPolicyTooLargeException";$fault="client";constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),Object.setPrototypeOf(this,Oe.prototype)}}class $e extends S{name="RegionDisabledException";$fault="client";constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),Object.setPrototypeOf(this,$e.prototype)}}class ke extends S{name="IDPRejectedClaimException";$fault="client";constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),Object.setPrototypeOf(this,ke.prototype)}}class Fe extends S{name="InvalidIdentityTokenException";$fault="client";constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),Object.setPrototypeOf(this,Fe.prototype)}}const br=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:et}}),Pr=e=>({...e,...e.Credentials&&{Credentials:Tt(e.Credentials)}});class Ve extends S{name="IDPCommunicationErrorException";$fault="client";constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),Object.setPrototypeOf(this,Ve.prototype)}}const Nr=async(e,t)=>{const n=vt;let r;return r=$t({...Or(e),[Rt]:Jr,[Ot]:_t}),St(t,n,"/",void 0,r)},Ar=async(e,t)=>{const n=vt;let r;return r=$t({...$r(e),[Rt]:Yr,[Ot]:_t}),St(t,n,"/",void 0,r)},Tr=async(e,t)=>{if(e.statusCode>=300)return xt(e,t);const n=await Ce(e.body,t);let r={};return r=Wr(n.AssumeRoleResult),{$metadata:_(e),...r}},xr=async(e,t)=>{if(e.statusCode>=300)return xt(e,t);const n=await Ce(e.body,t);let r={};return r=Mr(n.AssumeRoleWithWebIdentityResult),{$metadata:_(e),...r}},xt=async(e,t)=>{const n={...e,body:await Ks(e.body,t)},r=Qr(e,n.body);switch(r){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Ir(n);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await vr(n);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await _r(n);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Rr(n);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await wr(n);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Cr(n);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Sr(n);default:const s=n.body;return Zr({output:e,parsedBody:s.Error,errorCode:r})}},Ir=async(e,t)=>{const n=e.body,r=Br(n.Error),s=new _e({$metadata:_(e),...r});return V(s,n)},wr=async(e,t)=>{const n=e.body,r=zr(n.Error),s=new Ve({$metadata:_(e),...r});return V(s,n)},Cr=async(e,t)=>{const n=e.body,r=Xr(n.Error),s=new ke({$metadata:_(e),...r});return V(s,n)},Sr=async(e,t)=>{const n=e.body,r=jr(n.Error),s=new Fe({$metadata:_(e),...r});return V(s,n)},vr=async(e,t)=>{const n=e.body,r=Gr(n.Error),s=new Re({$metadata:_(e),...r});return V(s,n)},_r=async(e,t)=>{const n=e.body,r=qr(n.Error),s=new Oe({$metadata:_(e),...r});return V(s,n)},Rr=async(e,t)=>{const n=e.body,r=Kr(n.Error),s=new $e({$metadata:_(e),...r});return V(s,n)},Or=(e,t)=>{const n={};if(e[X]!=null&&(n[X]=e[X]),e[j]!=null&&(n[j]=e[j]),e[B]!=null){const r=It(e[B]);e[B]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const c=`PolicyArns.${s}`;n[c]=o})}if(e[M]!=null&&(n[M]=e[M]),e[W]!=null&&(n[W]=e[W]),e[me]!=null){const r=Hr(e[me]);e[me]?.length===0&&(n.Tags=[]),Object.entries(r).forEach(([s,o])=>{const c=`Tags.${s}`;n[c]=o})}if(e[Ee]!=null){const r=Ur(e[Ee]);e[Ee]?.length===0&&(n.TransitiveTagKeys=[]),Object.entries(r).forEach(([s,o])=>{const c=`TransitiveTagKeys.${s}`;n[c]=o})}if(e[ie]!=null&&(n[ie]=e[ie]),e[ge]!=null&&(n[ge]=e[ge]),e[ye]!=null&&(n[ye]=e[ye]),e[v]!=null&&(n[v]=e[v]),e[le]!=null){const r=Vr(e[le]);e[le]?.length===0&&(n.ProvidedContexts=[]),Object.entries(r).forEach(([s,o])=>{const c=`ProvidedContexts.${s}`;n[c]=o})}return n},$r=(e,t)=>{const n={};if(e[X]!=null&&(n[X]=e[X]),e[j]!=null&&(n[j]=e[j]),e[Pe]!=null&&(n[Pe]=e[Pe]),e[de]!=null&&(n[de]=e[de]),e[B]!=null){const r=It(e[B]);e[B]?.length===0&&(n.PolicyArns=[]),Object.entries(r).forEach(([s,o])=>{const c=`PolicyArns.${s}`;n[c]=o})}return e[M]!=null&&(n[M]=e[M]),e[W]!=null&&(n[W]=e[W]),n},It=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=kr(s);Object.entries(o).forEach(([c,a])=>{n[`member.${r}.${c}`]=a}),r++}return n},kr=(e,t)=>{const n={};return e[Ne]!=null&&(n[Ne]=e[Ne]),n},Fr=(e,t)=>{const n={};return e[ce]!=null&&(n[ce]=e[ce]),e[re]!=null&&(n[re]=e[re]),n},Vr=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=Fr(s);Object.entries(o).forEach(([c,a])=>{n[`member.${r}.${c}`]=a}),r++}return n},Lr=(e,t)=>{const n={};return e[ae]!=null&&(n[ae]=e[ae]),e[be]!=null&&(n[be]=e[be]),n},Ur=(e,t)=>{const n={};let r=1;for(const s of e)s!==null&&(n[`member.${r}`]=s,r++);return n},Hr=(e,t)=>{const n={};let r=1;for(const s of e){if(s===null)continue;const o=Lr(s);Object.entries(o).forEach(([c,a])=>{n[`member.${r}.${c}`]=a}),r++}return n},wt=(e,t)=>{const n={};return e[te]!=null&&(n[te]=T(e[te])),e[ne]!=null&&(n[ne]=T(e[ne])),n},Wr=(e,t)=>{const n={};return e[H]!=null&&(n[H]=Ct(e[H])),e[U]!=null&&(n[U]=wt(e[U])),e[z]!=null&&(n[z]=st(e[z])),e[v]!=null&&(n[v]=T(e[v])),n},Mr=(e,t)=>{const n={};return e[H]!=null&&(n[H]=Ct(e[H])),e[he]!=null&&(n[he]=T(e[he])),e[U]!=null&&(n[U]=wt(e[U])),e[z]!=null&&(n[z]=st(e[z])),e[ue]!=null&&(n[ue]=T(e[ue])),e[se]!=null&&(n[se]=T(e[se])),e[v]!=null&&(n[v]=T(e[v])),n},Ct=(e,t)=>{const n={};return e[ee]!=null&&(n[ee]=T(e[ee])),e[fe]!=null&&(n[fe]=T(e[fe])),e[pe]!=null&&(n[pe]=T(e[pe])),e[oe]!=null&&(n[oe]=vn(_n(e[oe]))),n},Br=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},zr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},Xr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},jr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},Gr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},qr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},Kr=(e,t)=>{const n={};return e[E]!=null&&(n[E]=T(e[E])),n},_=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Zr=xn(S),St=async(e,t,n,r,s)=>{const{hostname:o,protocol:c="https",port:a,path:i}=await e.endpoint(),d={protocol:c,hostname:o,port:a,method:"POST",path:i.endsWith("/")?i.slice(0,-1)+n:i+n,headers:t};return s!==void 0&&(d.body=s),new J(d)},vt={"content-type":"application/x-www-form-urlencoded"},_t="2011-06-15",Rt="Action",ee="AccessKeyId",Jr="AssumeRole",te="AssumedRoleId",U="AssumedRoleUser",Yr="AssumeRoleWithWebIdentity",ne="Arn",se="Audience",H="Credentials",re="ContextAssertion",W="DurationSeconds",oe="Expiration",ie="ExternalId",ae="Key",M="Policy",B="PolicyArns",ce="ProviderArn",le="ProvidedContexts",de="ProviderId",z="PackedPolicySize",ue="Provider",X="RoleArn",j="RoleSessionName",fe="SecretAccessKey",he="SubjectFromWebIdentityToken",v="SourceIdentity",ge="SerialNumber",pe="SessionToken",me="Tags",ye="TokenCode",Ee="TransitiveTagKeys",Ot="Version",be="Value",Pe="WebIdentityToken",Ne="arn",E="message",$t=e=>Object.entries(e).map(([t,n])=>Le(t)+"="+Le(n)).join("&"),Qr=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};class kt extends tt.classBuilder().ep(ft).m(function(t,n,r,s){return[rt(r,this.serialize,this.deserialize),nt(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Er).ser(Nr).de(Tr).build(){}class Dr extends tt.classBuilder().ep(ft).m(function(t,n,r,s){return[rt(r,this.serialize,this.deserialize),nt(r,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(br,Pr).ser(Ar).de(xr).build(){}const eo={AssumeRoleCommand:kt,AssumeRoleWithWebIdentityCommand:Dr};class to extends ve{}Rn(eo,to);const io=Object.freeze(Object.defineProperty({__proto__:null,AssumeRoleCommand:kt,STSClient:ve},Symbol.toStringTag,{value:"Module"}));export{Dr as A,Tt as C,_e as E,ke as I,Re as M,Oe as P,$e as R,ve as S,S as a,to as b,kt as c,Er as d,Fe as e,br as f,Pr as g,Ve as h,io as l};
