var me=Object.defineProperty;var xe=(e,n,t)=>n in e?me(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var i=(e,n,t)=>xe(e,typeof n!="symbol"?n+"":n,t);import{c as Ee,r as fe,n as we,g as Se,E as Pe,b as ve,d as Ce,e as Ie,p as ge,N as be,A as Ae,f as Re,h as ze,S as Fe,D as _e,i as De,j as ke,k as He,l as $e,m as Oe,o as Ue,q as Le,t as Ne,u as Te,v as Me,w as Ge,C as qe,x as je,y as Be,z as Ve,B as Je,F as We,G as Ke,H as Qe,I as Xe,J as Ye,K as Ze,L as et,M as tt,O as nt,P as st,Q as ot,R as z,T as rt,U as m,a as te,V as ne}from"./index2.js";import{t as it,f as at,s as dt,F as ct,e as A,a as lt,p as ut,b as pt,g as se}from"./layout.js";const oe=(e,n)=>{const t={};for(const s in n)ht(t,e,n,s);return t},ht=(e,n,t,s)=>{if(n!==null){let r=t[s];typeof r=="function"&&(r=[,r]);const[p=yt,E=mt,w=s]=r;(typeof p=="function"&&p(n[w])||typeof p!="function"&&p)&&(e[s]=E(n[w]));return}let[o,d]=t[s];if(typeof d=="function"){let r;const p=o===void 0&&(r=d())!=null,E=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;p?e[s]=r:E&&(e[s]=d())}else{const r=o===void 0&&d!=null,p=typeof o=="function"&&!!o(d)||typeof o!="function"&&!!o;(r||p)&&(e[s]=d)}},yt=e=>e!=null,mt=e=>e,u=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(n=>n!=null).map(u);if(typeof e=="object"){const n={};for(const t of Object.keys(e))e[t]!=null&&(n[t]=u(e[t]));return n}return e},F=(e,n)=>Ee(e,n).then(t=>{if(t.length)try{return JSON.parse(t)}catch(s){throw(s==null?void 0:s.name)==="SyntaxError"&&Object.defineProperty(s,"$responseBodyText",{value:t}),s}return{}}),xt=async(e,n)=>{const t=await F(e,n);return t.message=t.message??t.Message,t},Et=(e,n)=>{const t=(d,r)=>Object.keys(d).find(p=>p.toLowerCase()===r.toLowerCase()),s=d=>{let r=d;return typeof r=="number"&&(r=r.toString()),r.indexOf(",")>=0&&(r=r.split(",")[0]),r.indexOf(":")>=0&&(r=r.split(":")[0]),r.indexOf("#")>=0&&(r=r.split("#")[1]),r},o=t(e.headers,"x-amzn-errortype");if(o!==void 0)return s(e.headers[o]);if(n.code!==void 0)return s(n.code);if(n.__type!==void 0)return s(n.__type)},ft=async(e,n,t)=>({operation:Se(n).operation,region:await we(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});function wt(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"cognito-identity",region:e.region},propertiesExtractor:(n,t)=>({signingProperties:{config:n,context:t}})}}function g(e){return{schemeId:"smithy.api#noAuth"}}const St=e=>{const n=[];switch(e.operation){case"GetCredentialsForIdentity":{n.push(g());break}case"GetId":{n.push(g());break}case"GetOpenIdToken":{n.push(g());break}case"UnlinkIdentity":{n.push(g());break}default:n.push(wt(e))}return n},Pt=e=>({...fe(e)}),vt=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"cognito-identity"}),re={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},Ct="3.768.0",It={version:Ct},gt=e=>new TextEncoder().encode(e),bt=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},ie="required",c="fn",l="argv",P="ref",B=!0,V="isSet",I="booleanEquals",S="error",x="endpoint",f="tree",_="PartitionResult",D="getAttr",v="stringEquals",J={[ie]:!1,type:"String"},W={[ie]:!0,default:!1,type:"Boolean"},K={[P]:"Endpoint"},ae={[c]:I,[l]:[{[P]:"UseFIPS"},!0]},de={[c]:I,[l]:[{[P]:"UseDualStack"},!0]},a={},C={[P]:"Region"},Q={[c]:D,[l]:[{[P]:_},"supportsFIPS"]},ce={[P]:_},X={[c]:I,[l]:[!0,{[c]:D,[l]:[ce,"supportsDualStack"]}]},Y=[ae],Z=[de],ee=[C],At={parameters:{Region:J,UseDualStack:W,UseFIPS:W,Endpoint:J},rules:[{conditions:[{[c]:V,[l]:[K]}],rules:[{conditions:Y,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:S},{conditions:Z,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:S},{endpoint:{url:K,properties:a,headers:a},type:x}],type:f},{conditions:[{[c]:V,[l]:ee}],rules:[{conditions:[{[c]:"aws.partition",[l]:ee,assign:_}],rules:[{conditions:[ae,de],rules:[{conditions:[{[c]:I,[l]:[B,Q]},X],rules:[{conditions:[{[c]:v,[l]:[C,"us-east-1"]}],endpoint:{url:"https://cognito-identity-fips.us-east-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:v,[l]:[C,"us-east-2"]}],endpoint:{url:"https://cognito-identity-fips.us-east-2.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:v,[l]:[C,"us-west-1"]}],endpoint:{url:"https://cognito-identity-fips.us-west-1.amazonaws.com",properties:a,headers:a},type:x},{conditions:[{[c]:v,[l]:[C,"us-west-2"]}],endpoint:{url:"https://cognito-identity-fips.us-west-2.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:f},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:S}],type:f},{conditions:Y,rules:[{conditions:[{[c]:I,[l]:[Q,B]}],rules:[{endpoint:{url:"https://cognito-identity-fips.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:f},{error:"FIPS is enabled but this partition does not support FIPS",type:S}],type:f},{conditions:Z,rules:[{conditions:[X],rules:[{conditions:[{[c]:v,[l]:["aws",{[c]:D,[l]:[ce,"name"]}]}],endpoint:{url:"https://cognito-identity.{Region}.amazonaws.com",properties:a,headers:a},type:x},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:a,headers:a},type:x}],type:f},{error:"DualStack is enabled but this partition does not support DualStack",type:S}],type:f},{endpoint:{url:"https://cognito-identity.{Region}.{PartitionResult#dnsSuffix}",properties:a,headers:a},type:x}],type:f}],type:f},{error:"Invalid Configuration: Missing Region",type:S}]},Rt=At,zt=new Pe({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Ft=(e,n={})=>zt.get(e,()=>ve(Rt,{endpointParams:e,logger:n.logger}));Ie.aws=Ce;const _t=e=>({apiVersion:"2014-06-30",base64Decoder:(e==null?void 0:e.base64Decoder)??at,base64Encoder:(e==null?void 0:e.base64Encoder)??it,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Ft,extensions:(e==null?void 0:e.extensions)??[],httpAuthSchemeProvider:(e==null?void 0:e.httpAuthSchemeProvider)??St,httpAuthSchemes:(e==null?void 0:e.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:n=>n.getIdentityProvider("aws.auth#sigv4"),signer:new Ae},{schemeId:"smithy.api#noAuth",identityProvider:n=>n.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Re}],logger:(e==null?void 0:e.logger)??new be,serviceId:(e==null?void 0:e.serviceId)??"Cognito Identity",urlParser:(e==null?void 0:e.urlParser)??ge,utf8Decoder:(e==null?void 0:e.utf8Decoder)??gt,utf8Encoder:(e==null?void 0:e.utf8Encoder)??bt}),Dt=e=>{const n=ze(e),t=()=>n().then(Le),s=_t(e);return{...s,...e,runtime:"browser",defaultsMode:n,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??$e,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(o=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??He({serviceId:s.serviceId,clientVersion:It.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??ke,region:(e==null?void 0:e.region)??De("Region is missing"),requestHandler:ct.create((e==null?void 0:e.requestHandler)??t),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await t()).retryMode||_e),sha256:(e==null?void 0:e.sha256)??Fe,streamCollector:(e==null?void 0:e.streamCollector)??dt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Ue)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(Oe))}},kt=e=>({setHttpHandler(n){e.httpHandler=n},httpHandler(){return e.httpHandler},updateHttpClientConfig(n,t){var s;(s=e.httpHandler)==null||s.updateHttpClientConfig(n,t)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),Ht=e=>({httpHandler:e.httpHandler()});class R{constructor(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?n.protocol.slice(-1)!==":"?`${n.protocol}:`:n.protocol:"https:",this.path=n.path?n.path.charAt(0)!=="/"?`/${n.path}`:n.path:"/",this.username=n.username,this.password=n.password,this.fragment=n.fragment}static clone(n){const t=new R({...n,headers:{...n.headers}});return t.query&&(t.query=$t(t.query)),t}static isInstance(n){if(!n)return!1;const t=n;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&typeof t.query=="object"&&typeof t.headers=="object"}clone(){return R.clone(this)}}function $t(e){return Object.keys(e).reduce((n,t)=>{const s=e[t];return{...n,[t]:Array.isArray(s)?[...s]:s}},{})}const Ot=e=>{const n=e.httpAuthSchemes;let t=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(o){const d=n.findIndex(r=>r.schemeId===o.schemeId);d===-1?n.push(o):n.splice(d,1,o)},httpAuthSchemes(){return n},setHttpAuthSchemeProvider(o){t=o},httpAuthSchemeProvider(){return t},setCredentials(o){s=o},credentials(){return s}}},Ut=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),b=e=>e,Lt=(e,n)=>{const t={...b(Te(e)),...b(Ne(e)),...b(kt(e)),...b(Ot(e))};return n.forEach(s=>s.configure(t)),{...e,...Ge(t),...Me(t),...Ht(t),...Ut(t)}};class un extends qe{constructor(...[t]){const s=Dt(t||{}),o=vt(s),d=je(o),r=Be(d),p=Ve(r),E=nt(p),w=Je(E),he=Pt(w),j=Lt(he,(t==null?void 0:t.extensions)||[]);super(j);i(this,"config");this.config=j,this.middlewareStack.use(We(this.config)),this.middlewareStack.use(Ke(this.config)),this.middlewareStack.use(Qe(this.config)),this.middlewareStack.use(Xe(this.config)),this.middlewareStack.use(Ye(this.config)),this.middlewareStack.use(Ze(this.config)),this.middlewareStack.use(et(this.config,{httpAuthSchemeParametersProvider:ft,identityProviderConfigProvider:async ye=>new st({"aws.auth#sigv4":ye.credentials})})),this.middlewareStack.use(tt(this.config))}destroy(){super.destroy()}}class h extends ot{constructor(n){super(n),Object.setPrototypeOf(this,h.prototype)}}class k extends h{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});i(this,"name","InternalErrorException");i(this,"$fault","server");Object.setPrototypeOf(this,k.prototype)}}class H extends h{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});i(this,"name","InvalidParameterException");i(this,"$fault","client");Object.setPrototypeOf(this,H.prototype)}}class $ extends h{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});i(this,"name","LimitExceededException");i(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}}class O extends h{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});i(this,"name","NotAuthorizedException");i(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}}class U extends h{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});i(this,"name","ResourceConflictException");i(this,"$fault","client");Object.setPrototypeOf(this,U.prototype)}}class L extends h{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});i(this,"name","TooManyRequestsException");i(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}}class N extends h{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});i(this,"name","ResourceNotFoundException");i(this,"$fault","client");Object.setPrototypeOf(this,N.prototype)}}class T extends h{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});i(this,"name","ExternalServiceException");i(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}}class M extends h{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});i(this,"name","InvalidIdentityPoolConfigurationException");i(this,"$fault","client");Object.setPrototypeOf(this,M.prototype)}}class G extends h{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});i(this,"name","DeveloperUserAlreadyRegisteredException");i(this,"$fault","client");Object.setPrototypeOf(this,G.prototype)}}class q extends h{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});i(this,"name","ConcurrentModificationException");i(this,"$fault","client");Object.setPrototypeOf(this,q.prototype)}}const Nt=e=>({...e,...e.Logins&&{Logins:z}}),Tt=e=>({...e,...e.SecretKey&&{SecretKey:z}}),Mt=e=>({...e,...e.Credentials&&{Credentials:Tt(e.Credentials)}}),Gt=e=>({...e,...e.Logins&&{Logins:z}}),qt=async(e,n)=>{const t=pe("GetCredentialsForIdentity");let s;return s=JSON.stringify(u(e)),ue(n,t,"/",void 0,s)},jt=async(e,n)=>{const t=pe("GetId");let s;return s=JSON.stringify(u(e)),ue(n,t,"/",void 0,s)},Bt=async(e,n)=>{if(e.statusCode>=300)return le(e,n);const t=await F(e.body,n);let s={};return s=rn(t),{$metadata:y(e),...s}},Vt=async(e,n)=>{if(e.statusCode>=300)return le(e,n);const t=await F(e.body,n);let s={};return s=u(t),{$metadata:y(e),...s}},le=async(e,n)=>{const t={...e,body:await xt(e.body,n)},s=Et(e,t.body);switch(s){case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":throw await Qt(t);case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":throw await Yt(t);case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":throw await Zt(t);case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":throw await en(t);case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":throw await tn(t);case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":throw await sn(t);case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":throw await nn(t);case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":throw await Kt(t);case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":throw await Xt(t);case"DeveloperUserAlreadyRegisteredException":case"com.amazonaws.cognitoidentity#DeveloperUserAlreadyRegisteredException":throw await Wt(t);case"ConcurrentModificationException":case"com.amazonaws.cognitoidentity#ConcurrentModificationException":throw await Jt(t);default:const o=t.body;return an({output:e,parsedBody:o,errorCode:s})}},Jt=async(e,n)=>{const t=e.body,s=u(t),o=new q({$metadata:y(e),...s});return m(o,t)},Wt=async(e,n)=>{const t=e.body,s=u(t),o=new G({$metadata:y(e),...s});return m(o,t)},Kt=async(e,n)=>{const t=e.body,s=u(t),o=new T({$metadata:y(e),...s});return m(o,t)},Qt=async(e,n)=>{const t=e.body,s=u(t),o=new k({$metadata:y(e),...s});return m(o,t)},Xt=async(e,n)=>{const t=e.body,s=u(t),o=new M({$metadata:y(e),...s});return m(o,t)},Yt=async(e,n)=>{const t=e.body,s=u(t),o=new H({$metadata:y(e),...s});return m(o,t)},Zt=async(e,n)=>{const t=e.body,s=u(t),o=new $({$metadata:y(e),...s});return m(o,t)},en=async(e,n)=>{const t=e.body,s=u(t),o=new O({$metadata:y(e),...s});return m(o,t)},tn=async(e,n)=>{const t=e.body,s=u(t),o=new U({$metadata:y(e),...s});return m(o,t)},nn=async(e,n)=>{const t=e.body,s=u(t),o=new N({$metadata:y(e),...s});return m(o,t)},sn=async(e,n)=>{const t=e.body,s=u(t),o=new L({$metadata:y(e),...s});return m(o,t)},on=(e,n)=>oe(e,{AccessKeyId:A,Expiration:t=>lt(ut(pt(t))),SecretKey:A,SessionToken:A}),rn=(e,n)=>oe(e,{Credentials:t=>on(t),IdentityId:A}),y=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),an=rt(h),ue=async(e,n,t,s,o)=>{const{hostname:d,protocol:r="https",port:p,path:E}=await e.endpoint(),w={protocol:r,hostname:d,port:p,method:"POST",path:E.endsWith("/")?E.slice(0,-1)+t:E+t,headers:n};return o!==void 0&&(w.body=o),new R(w)};function pe(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}}class pn extends te.classBuilder().ep(re).m(function(n,t,s,o){return[se(s,this.serialize,this.deserialize),ne(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").f(Nt,Mt).ser(qt).de(Bt).build(){}class hn extends te.classBuilder().ep(re).m(function(n,t,s,o){return[se(s,this.serialize,this.deserialize),ne(s,n.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").f(Gt,void 0).ser(jt).de(Vt).build(){}export{un as CognitoIdentityClient,pn as GetCredentialsForIdentityCommand,hn as GetIdCommand};
